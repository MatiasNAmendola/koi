#!/usr/bin/env ruby

require 'rubygems'
require 'koi-vm'
require File.expand_path(File.join(File.dirname(__FILE__), '..', 'lib', 'min-koi.rb'))

data = ARGF.read

tree = Parser.parse(data)

bytecode = MinKoiCompiler.compile(tree)

vm = KoiVM::VM.new
vm.run( bytecode )